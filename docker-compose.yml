version: '2'

services:

  php:
    build:
      context: ./lamp/php/
      dockerfile: Dockerfile-php
    environment:
    # example: HTML_PUBLIC=public (for Laravel)
    - HTML_PUBLIC=public
    volumes:
    - ./:/var/www/html:rw
    ports:
    - "1080:80"
    - "443:443"
    links:
    - mysql
    restart: "no"

  mysql:
    image: mysql:5.5
    environment:
    - MYSQL_ROOT_PASSWORD=root
    - MYSQL_DATABASE=database
    - MYSQL_USER=user
    - MYSQL_PASSWORD=user
    ports:
    - "33060:3306"
    restart: "no"

  adminer:
    build:
      context: ./lamp/adminer/
      dockerfile: Dockerfile-adminer
    environment:
    - ADMINER_SERVER=mysql
    - ADMINER_USER=root
    - ADMINER_PASSWORD=root
    - ADMINER_DATABASE=database
    ports:
    - "30303:8080"
    links:
    - mysql
    restart: "no"
